<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<ui:composition template="/WEB-INF/template.xhtml">
    
    <ui:define name="title">Início - Sistema Java</ui:define>
    
    <ui:define name="content">
        <div class="grid-container">
            <!-- Welcome Panel -->
            <div class="grid-item">
                <p:panel header="Bem-vindo ao Sistema Java" styleClass="welcome-panel">
                    <p:outputPanel>
                        <div class="welcome-content">
                            <i class="pi pi-home" style="font-size: 3rem; color: #667eea; margin-bottom: 15px;"></i>
                            <p style="font-size: 16px; margin-bottom: 15px;">Sistema completo desenvolvido com Spring Boot, JSF e PrimeFaces.</p>
                            <p style="color: #666;">Explore as funcionalidades disponíveis através dos painéis interativos abaixo.</p>
                        </div>
                    </p:outputPanel>
                </p:panel>
            </div>
            
            <!-- Quick Actions Panel -->
            <div class="grid-item">
                <p:panel header="Ações Rápidas" styleClass="actions-panel">
                    <h:form>
                        <div class="action-buttons">
                            <p:commandButton value="Verificar Status" 
                                           action="#{systemStatusBean.updateStatus}" 
                                           update="statusPanel" 
                                           icon="pi pi-check-circle"
                                           styleClass="ui-button-success ui-button-lg" />
                            
                            <p:commandButton value="Atualizar Dados" 
                                           onclick="PF('statusDialog').show()" 
                                           icon="pi pi-refresh"
                                           styleClass="ui-button-info ui-button-lg" />
                            
                            <p:commandButton value="Configurações" 
                                           icon="pi pi-cog"
                                           styleClass="ui-button-secondary ui-button-lg" />
                        </div>
                    </h:form>
                </p:panel>
            </div>
            
            <!-- System Status Panel -->
            <div class="grid-item">
                <p:panel header="Status do Sistema" id="statusPanel" styleClass="status-panel">
                    <h:form>
                        <p:dataTable value="#{systemStatusBean.services}" var="service" 
                                   styleClass="status-table"
                                   emptyMessage="Nenhum serviço encontrado"
                                   responsive="true">
                            <p:column headerText="Serviço" sortBy="#{service.name}">
                                <div class="service-info">
                                    <i class="pi pi-server" style="margin-right: 8px; color: #667eea;"></i>
                                    <h:outputText value="#{service.name}" style="font-weight: 500;" />
                                </div>
                            </p:column>
                            
                            <p:column headerText="Status" sortBy="#{service.status}">
                                <p:badge value="#{service.status}" 
                                       severity="#{service.status eq 'Online' ? 'success' : 'danger'}"
                                       style="font-size: 12px;" />
                            </p:column>
                            
                            <p:column headerText="Última Verificação">
                                <div class="timestamp">
                                    <i class="pi pi-clock" style="margin-right: 5px; color: #999;"></i>
                                    <h:outputText value="#{service.lastCheck}" style="font-size: 13px; color: #666;" />
                                </div>
                            </p:column>
                        </p:dataTable>
                        
                        <br/>
                        <p:commandButton value="Atualizar Status" 
                                       action="#{systemStatusBean.refreshStatus}"
                                       update="@form"
                                       styleClass="ui-button-outlined"
                                       style="width: 100%;"/>
                    </h:form>
                </p:panel>
            </div>
            
            <!-- Recent Activity Panel -->
            <div class="grid-item">
                <p:panel header="Atividade Recente" styleClass="activity-panel">
                    <p:timeline value="#{activityBean.recentActivities}" var="activity" 
                              align="alternate" styleClass="custom-timeline">
                        <p:timelineEvent>
                            <div class="activity-item">
                                <div class="activity-header">
                                    <i class="pi pi-#{activity.icon}" style="color: #{activity.color}; margin-right: 8px;"></i>
                                    <span class="activity-action">#{activity.action}</span>
                                </div>
                                <div class="activity-details">
                                    <span class="activity-user">por #{activity.user}</span>
                                    <span class="activity-time">#{activity.timestamp}</span>
                                </div>
                            </div>
                        </p:timelineEvent>
                    </p:timeline>
                </p:panel>
            </div>
            
            <!-- Statistics Panel -->
            <div class="grid-item">
                <p:panel header="Estatísticas do Sistema" styleClass="stats-panel">
                    <div class="stats-grid">
                        <div class="stat-card stat-users">
                            <div class="stat-icon">
                                <i class="pi pi-users"></i>
                            </div>
                            <div class="stat-content">
                                <h4>#{statisticsBean.totalUsers}</h4>
                                <p>Usuários Ativos</p>
                            </div>
                        </div>
                        
                        <div class="stat-card stat-sessions">
                            <div class="stat-icon">
                                <i class="pi pi-globe"></i>
                            </div>
                            <div class="stat-content">
                                <h4>#{statisticsBean.totalSessions}</h4>
                                <p>Sessões Ativas</p>
                            </div>
                        </div>
                        
                        <div class="stat-card stat-requests">
                            <div class="stat-icon">
                                <i class="pi pi-chart-line"></i>
                            </div>
                            <div class="stat-content">
                                <h4>#{statisticsBean.totalRequests}</h4>
                                <p>Requisições/Hora</p>
                            </div>
                        </div>
                        
                        <div class="stat-card stat-uptime">
                            <div class="stat-icon">
                                <i class="pi pi-clock"></i>
                            </div>
                            <div class="stat-content">
                                <h4>#{statisticsBean.systemUptime}</h4>
                                <p>Uptime</p>
                            </div>
                        </div>
                    </div>
                </p:panel>
            </div>
            
            <!-- API Endpoints Panel -->
            <div class="grid-item">
                <p:panel header="Endpoints da API" styleClass="api-panel">
                    <p:dataTable value="#{apiEndpointsBean.endpoints}" var="endpoint" 
                               styleClass="api-table"
                               emptyMessage="Nenhum endpoint encontrado"
                               responsive="true"
                               paginator="true" rows="10">
                        
                        <p:column headerText="Método" sortBy="#{endpoint.method}" style="width: 80px;">
                            <p:badge value="#{endpoint.method}" 
                                   severity="#{endpoint.method eq 'GET' ? 'success' : endpoint.method eq 'POST' ? 'info' : 'warning'}"
                                   style="font-size: 11px; font-weight: bold;" />
                        </p:column>
                        
                        <p:column headerText="Endpoint" sortBy="#{endpoint.path}">
                            <div class="endpoint-info">
                                <code class="endpoint-path">#{endpoint.path}</code>
                            </div>
                        </p:column>
                        
                        <p:column headerText="Descrição">
                            <h:outputText value="#{endpoint.description}" style="font-size: 13px; color: #666;" />
                        </p:column>
                        
                        <p:column headerText="Ação" style="width: 100px;">
                            <p:commandButton value="Testar" 
                                           onclick="window.open('#{endpoint.path}', '_blank')" 
                                           icon="pi pi-external-link"
                                           styleClass="ui-button-sm ui-button-outlined"
                                           type="button" />
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </div>
        </div>
        
        <!-- Responsive CSS for this page -->
        <style>
            .welcome-panel .ui-panel-content {
                line-height: 1.6;
            }
            
            .responsive-table {
                width: 100%;
            }
            
            @media (max-width: 768px) {
                .responsive-table .ui-datatable-scrollable-body {
                    overflow-x: auto;
                }
                
                .grid-container {
                    grid-template-columns: 1fr;
                }
            }
            
            .ui-timeline {
                max-height: 300px;
                overflow-y: auto;
            }
            
            .ui-badge {
                font-size: 0.875em;
            }
        </style>
    </ui:define>
    
</ui:composition>
</html>